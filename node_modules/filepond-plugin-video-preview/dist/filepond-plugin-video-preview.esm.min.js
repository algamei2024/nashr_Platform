/*!
 * FilePondPluginVideoPreview 1.0.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */

/* eslint-disable */

const e=e=>{return e.utils.createView({name:"video-preview-wrapper",create:({root:i,props:t})=>{const d=(e=>e.utils.createView({name:"video-preview",tag:"div",ignoreRect:!0,create:({root:e})=>{e.ref.video=document.createElement("video"),e.ref.video.setAttribute("controls",!0),e.element.appendChild(e.ref.video)},write:e.utils.createRoute({DID_VIDEO_PREVIEW_LOAD:({root:e,props:i})=>{const{id:t}=i,d=e.query("GET_ITEM",{id:i.id});if(!d)return;let o=window.URL||window.webkitURL,r=new Blob([d.file],{type:d.file.type});e.ref.video.type=d.file.type,e.ref.video.src=o.createObjectURL(r)}})}))(e);i.ref.video=i.appendChildView(i.createChildView(d,{id:t.id}))},write:e.utils.createRoute({DID_VIDEO_PREVIEW_CONTAINER_CREATE:({root:e,props:i})=>{const{id:t}=i;e.query("GET_ITEM",t)&&e.dispatch("DID_VIDEO_PREVIEW_LOAD",{id:t})}})})},i=e=>/^video/.test(e.type),t=t=>{const{addFilter:d,utils:o}=t,{Type:r,createRoute:n}=o,E=e(t);return d("CREATE_VIEW",e=>{const{is:t,view:d,query:o}=e;if(!t("file"))return;d.registerWriter(n({DID_LOAD_ITEM:({root:e,props:t})=>{const{id:r}=t,n=o("GET_ITEM",r);n&&!n.archived&&i(n.file)&&(e.ref.videoPreview=d.appendChildView(d.createChildView(E,{id:r})),e.dispatch("DID_VIDEO_PREVIEW_CONTAINER_CREATE",{id:r}))}},({root:e,props:t})=>{const{id:d}=t,r=o("GET_ITEM",d);i(r.file)&&!e.rect.element.hidden&&0!=e.ref.shouldUpdatePanelHeight&&(e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:t.id,height:200}),e.ref.shouldUpdatePanelHeight=!1)}))}),{options:{allowVideoPreview:[!0,r.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t}));export default t;
