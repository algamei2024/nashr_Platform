/*!
 * FilePondPluginVideoPreview 1.0.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */

/* eslint-disable */

!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e=e||self).FilePondPluginVideoPreview=i()}(this,function(){"use strict";var e=function(e){return e.utils.createView({name:"video-preview-wrapper",create:function(i){var t=i.root,o=i.props,r=function(e){return e.utils.createView({name:"video-preview",tag:"div",ignoreRect:!0,create:function(e){var i=e.root;i.ref.video=document.createElement("video"),i.ref.video.setAttribute("controls",!0),i.element.appendChild(i.ref.video)},write:e.utils.createRoute({DID_VIDEO_PREVIEW_LOAD:function(e){var i=e.root,t=e.props,o=(t.id,i.query("GET_ITEM",{id:t.id}));if(o){var r=window.URL||window.webkitURL,d=new Blob([o.file],{type:o.file.type});i.ref.video.type=o.file.type,i.ref.video.src=r.createObjectURL(d)}}})})}(e);t.ref.video=t.appendChildView(t.createChildView(r,{id:o.id}))},write:e.utils.createRoute({DID_VIDEO_PREVIEW_CONTAINER_CREATE:function(e){var i=e.root,t=e.props.id;i.query("GET_ITEM",t)&&i.dispatch("DID_VIDEO_PREVIEW_LOAD",{id:t})}})})},i=function(e){return/^video/.test(e.type)},t=function(t){var o=t.addFilter,r=t.utils,d=r.Type,n=r.createRoute,u=e(t);return o("CREATE_VIEW",function(e){var t=e.is,o=e.view,r=e.query;if(t("file")){o.registerWriter(n({DID_LOAD_ITEM:function(e){var t=e.root,d=e.props.id,n=r("GET_ITEM",d);n&&!n.archived&&i(n.file)&&(t.ref.videoPreview=o.appendChildView(o.createChildView(u,{id:d})),t.dispatch("DID_VIDEO_PREVIEW_CONTAINER_CREATE",{id:d}))}},function(e){var t=e.root,o=e.props,d=o.id,n=r("GET_ITEM",d);i(n.file)&&!t.rect.element.hidden&&0!=t.ref.shouldUpdatePanelHeight&&(t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:o.id,height:200}),t.ref.shouldUpdatePanelHeight=!1)}))}}),{options:{allowVideoPreview:[!0,d.BOOLEAN]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t})),t});
